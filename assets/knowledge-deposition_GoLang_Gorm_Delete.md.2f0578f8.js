import{_ as s,c as a,o as n,e as l}from"./app.93ad80dc.js";const d=JSON.parse('{"title":"Delete","description":"","frontmatter":{"layout":"doc"},"headers":[{"level":2,"title":"删除单条","slug":"删除单条","link":"#删除单条","children":[]},{"level":2,"title":"根据主键删除","slug":"根据主键删除","link":"#根据主键删除","children":[]},{"level":2,"title":"批量删除","slug":"批量删除","link":"#批量删除","children":[]}],"relativePath":"knowledge-deposition/GoLang/Gorm/Delete.md"}'),e={name:"knowledge-deposition/GoLang/Gorm/Delete.md"},o=l('<h1 id="delete" tabindex="-1">Delete <a class="header-anchor" href="#delete" aria-hidden="true">#</a></h1><h2 id="删除单条" tabindex="-1">删除单条 <a class="header-anchor" href="#删除单条" aria-hidden="true">#</a></h2><ul><li>删除一条记录时，删除对象需要指定<code>主键</code>，否则会触发<code>批量删除</code></li></ul><div class="language-Go"><button title="Copy Code" class="copy"></button><span class="lang">Go</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">singleD </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> Teacher</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">ID</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">singleD</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;">// DELETE FROM `teachers` WHERE `teachers`.`id` = 2</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">singleD </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> Teacher</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">ID</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span></span>\n<span class="line"><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Where</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">age &gt;= ?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">singleD</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;">// DELETE FROM `teachers` WHERE age &gt;= 80 AND `teachers`.`id` = 2</span></span>\n<span class="line"></span></code></pre></div><h2 id="根据主键删除" tabindex="-1">根据主键删除 <a class="header-anchor" href="#根据主键删除" aria-hidden="true">#</a></h2><ul><li><code>GORM</code>允许通过<code>内联条件</code>指定<code>主键</code>来检索对象，但只支持<code>整型数值</code>，因为<code>string</code>可能导致<code>SQL注入</code></li></ul><div class="language-Go"><button title="Copy Code" class="copy"></button><span class="lang">Go</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">Teacher</span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">10</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;">// DELETE FROM `teachers` WHERE `teachers`.`id` = &#39;10&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">Teacher</span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">22</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">26</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">28</span><span style="color:#89DDFF;">})</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;">// DELETE FROM `teachers` WHERE `teachers`.`id` IN (20,22,26,28)</span></span>\n<span class="line"></span></code></pre></div><h2 id="批量删除" tabindex="-1">批量删除 <a class="header-anchor" href="#批量删除" aria-hidden="true">#</a></h2><ul><li>如果指定的条件不包括<code>主键</code>，那么会执行<code>批量删除</code>，将会删除<code>所有匹配的记录</code></li></ul><div class="language-Go"><button title="Copy Code" class="copy"></button><span class="lang">Go</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Where</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name LIKE ?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">元%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">Teacher</span><span style="color:#89DDFF;">{})</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;">// DELETE FROM `teachers` WHERE name LIKE &#39;元%&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">Teacher</span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name LIKE ?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">元%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;">// DELETE FROM `teachers` WHERE name LIKE &#39;元%&#39;</span></span>\n<span class="line"></span></code></pre></div>',10),p=[o];function t(c,r,D,F,y,i){return n(),a("div",null,p)}const A=s(e,[["render",t]]);export{d as __pageData,A as default};
