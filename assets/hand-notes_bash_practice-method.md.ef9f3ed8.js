import{_ as s,c as a,o as n,a as l}from"./app.489bffbb.js";const C=JSON.parse('{"title":"Bash实践中用到的方法记录","description":"","frontmatter":{},"headers":[{"level":2,"title":"通过路径提取文件名称/目录","slug":"通过路径提取文件名称-目录","link":"#通过路径提取文件名称-目录","children":[{"level":3,"title":"使用basename获取文件名称","slug":"使用basename获取文件名称","link":"#使用basename获取文件名称","children":[]},{"level":3,"title":"使用echo ${str##*/}获取文件名称","slug":"使用echo-str-获取文件名称","link":"#使用echo-str-获取文件名称","children":[]},{"level":3,"title":"使用dirname获取文件所在目录","slug":"使用dirname获取文件所在目录","link":"#使用dirname获取文件所在目录","children":[]}]},{"level":2,"title":"提取文件后缀","slug":"提取文件后缀","link":"#提取文件后缀","children":[]},{"level":2,"title":"判断变量是否包含某个字符串","slug":"判断变量是否包含某个字符串","link":"#判断变量是否包含某个字符串","children":[{"level":3,"title":"使用grep","slug":"使用grep","link":"#使用grep","children":[]},{"level":3,"title":"使用字符串运算符","slug":"使用字符串运算符","link":"#使用字符串运算符","children":[]}]},{"level":2,"title":"检测某个目录是否是git仓库","slug":"检测某个目录是否是git仓库","link":"#检测某个目录是否是git仓库","children":[]},{"level":2,"title":"获取命令行参数","slug":"获取命令行参数","link":"#获取命令行参数","children":[{"level":3,"title":"使用getopts方法","slug":"使用getopts方法","link":"#使用getopts方法","children":[]}]},{"level":2,"title":"获取当前时间","slug":"获取当前时间","link":"#获取当前时间","children":[]}],"relativePath":"hand-notes/bash/practice-method.md"}'),e={name:"hand-notes/bash/practice-method.md"},o=l(`<h1 id="bash实践中用到的方法记录" tabindex="-1">Bash实践中用到的方法记录 <a class="header-anchor" href="#bash实践中用到的方法记录" aria-hidden="true">#</a></h1><h2 id="通过路径提取文件名称-目录" tabindex="-1">通过路径提取文件名称/目录 <a class="header-anchor" href="#通过路径提取文件名称-目录" aria-hidden="true">#</a></h2><h3 id="使用basename获取文件名称" tabindex="-1">使用<code>basename</code>获取文件名称 <a class="header-anchor" href="#使用basename获取文件名称" aria-hidden="true">#</a></h3><p>使用方法：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">basename</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NAME</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">SUFFIX</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>示例：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/a1/b1/c1/foo.png</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出 foo</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">basename</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">$str</span><span style="color:#C3E88D;"> .png</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出 foo.png</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">basename</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">$str</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="使用echo-str-获取文件名称" tabindex="-1">使用<code>echo \${str##*/}</code>获取文件名称 <a class="header-anchor" href="#使用echo-str-获取文件名称" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./a/dsa/fwe/s.pkg</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出 s.pkg</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">##*/}</span></span>
<span class="line"></span></code></pre></div><h3 id="使用dirname获取文件所在目录" tabindex="-1">使用<code>dirname</code>获取文件所在目录 <a class="header-anchor" href="#使用dirname获取文件所在目录" aria-hidden="true">#</a></h3><p>注意⚠️：该方法不仅可以提取文件所在的目录，还能提取目录所在的目录 使用方法：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">dirname</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NAME</span></span>
<span class="line"></span></code></pre></div><p>示例：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/a1/b1/c1/foo.png</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出 /a1/b1/c1</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">dirname</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">$str</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">str1</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/a1/b1/c1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出 /a1/b1</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">dirname</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">$str1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="提取文件后缀" tabindex="-1">提取文件后缀 <a class="header-anchor" href="#提取文件后缀" aria-hidden="true">#</a></h2><ul><li>使用<code>\${str##*.}</code></li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./a/dsa/fwe/s.pkg</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出pkg</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">##*</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="判断变量是否包含某个字符串" tabindex="-1">判断变量是否包含某个字符串 <a class="header-anchor" href="#判断变量是否包含某个字符串" aria-hidden="true">#</a></h2><h3 id="使用grep" tabindex="-1">使用<code>grep</code> <a class="header-anchor" href="#使用grep" aria-hidden="true">#</a></h3><p>示例：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/a1/b1/c1/foo.png</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">$(</span><span style="color:#82AAFF;">echo</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;">$str</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&quot;)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#A6ACCD;">$res</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">包含foo</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">不包含foo</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span></code></pre></div><h3 id="使用字符串运算符" tabindex="-1">使用<code>字符串运算符</code> <a class="header-anchor" href="#使用字符串运算符" aria-hidden="true">#</a></h3><ul><li>利用字符串运算符<code>=~</code>直接判断<code>str</code>中是否包含<code>foo</code></li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/a1/b1/c1/foo.png</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#A6ACCD;">$res</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=~</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">包含foo</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">不包含foo</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span></code></pre></div><h2 id="检测某个目录是否是git仓库" tabindex="-1">检测某个目录是否是git仓库 <a class="header-anchor" href="#检测某个目录是否是git仓库" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">isGit</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> rev-parse --git-dir </span><span style="color:#89DDFF;">2&gt;</span><span style="color:#C3E88D;"> /dev/null</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">isGit</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="获取命令行参数" tabindex="-1">获取命令行参数 <a class="header-anchor" href="#获取命令行参数" aria-hidden="true">#</a></h2><h3 id="使用getopts方法" tabindex="-1">使用<code>getopts</code>方法 <a class="header-anchor" href="#使用getopts方法" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> getopts</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">:t:p:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> opt</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">do</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#A6ACCD;"> $opt </span><span style="color:#89DDFF;font-style:italic;">in</span></span>
<span class="line"><span style="color:#A6ACCD;">    t</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">t为</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    p</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">p为</span><span style="color:#A6ACCD;">$OPTARG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">?)</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">未知参数</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">;;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">esac</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">done</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ./test.sh -t debug -p ./app/asd</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出 参数t的值为debug 参数p的值为./app/asd</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ./test.sh -a </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出未知参数</span></span>
<span class="line"></span></code></pre></div><h2 id="获取当前时间" tabindex="-1">获取当前时间 <a class="header-anchor" href="#获取当前时间" aria-hidden="true">#</a></h2><p>注意⚠️： <code>date</code>后面有一个空格，否则无法识别命令</p><ul><li><code>Y</code>显示<code>4位年份</code>，例如<code>2023</code></li><li><code>y</code>显示<code>2位年份</code>，例如<code>23</code></li><li><code>M</code>表示<code>分钟</code></li><li><code>m</code>表示<code>数字月份</code></li><li><code>D</code>表示<code>当前日期</code>，例如<code>01/05/23</code>，也就是<code>23年1月5号</code></li><li><code>d</code>表示<code>天</code></li><li><code>H</code>表示<code>小时</code></li><li><code>h</code>表示<code>英文月份</code>，例如<code>Jan</code></li><li><code>S</code>表示<code>当前秒钟</code>，单位为<code>秒</code></li><li><code>s</code>表示<code>当前秒钟</code>，单位为<code>毫秒</code></li></ul><p>示例：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">time</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">date</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">+%Y-%m-%d %H:%M:%S</span><span style="color:#89DDFF;">&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">day</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">date</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">+%D</span><span style="color:#89DDFF;">&quot;)</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">time</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">day</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 打印</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2023-01-05 16:08:29</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 01/05/23</span></span>
<span class="line"></span></code></pre></div>`,34),p=[o];function t(c,r,i,D,y,F){return n(),a("div",null,p)}const h=s(e,[["render",t]]);export{C as __pageData,h as default};
