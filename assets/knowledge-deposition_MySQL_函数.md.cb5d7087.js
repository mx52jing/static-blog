import{_ as s,c as a,o as n,d as l}from"./app.546fb0db.js";const F=JSON.parse('{"title":"函数","description":"","frontmatter":{"layout":"doc"},"headers":[{"level":3,"title":"字符函数","slug":"字符函数","link":"#字符函数","children":[]},{"level":3,"title":"数学函数","slug":"数学函数","link":"#数学函数","children":[]},{"level":3,"title":"日期函数","slug":"日期函数","link":"#日期函数","children":[]},{"level":2,"title":"聚合函数","slug":"聚合函数","link":"#聚合函数","children":[{"level":3,"title":"SUM","slug":"sum","link":"#sum","children":[]},{"level":3,"title":"AVG","slug":"avg","link":"#avg","children":[]},{"level":3,"title":"COUNT","slug":"count","link":"#count","children":[]},{"level":3,"title":"MAX","slug":"max","link":"#max","children":[]},{"level":3,"title":"MIN","slug":"min","link":"#min","children":[]}]},{"level":2,"title":"自定义函数","slug":"自定义函数","link":"#自定义函数","children":[{"level":3,"title":"创建自定义函数","slug":"创建自定义函数","link":"#创建自定义函数","children":[]},{"level":3,"title":"使用自定义函数","slug":"使用自定义函数","link":"#使用自定义函数","children":[]},{"level":3,"title":"查看自定义函数","slug":"查看自定义函数","link":"#查看自定义函数","children":[]},{"level":3,"title":"删除自定义函数","slug":"删除自定义函数","link":"#删除自定义函数","children":[]},{"level":3,"title":"示例","slug":"示例","link":"#示例","children":[]}]}],"relativePath":"knowledge-deposition/MySQL/函数.md"}'),p={name:"knowledge-deposition/MySQL/函数.md"},o=l(`<h1 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-hidden="true">#</a></h1><h3 id="字符函数" tabindex="-1">字符函数 <a class="header-anchor" href="#字符函数" aria-hidden="true">#</a></h3><hr><h4 id="concat拼接字符串" tabindex="-1"><code>CONCAT</code>拼接字符串 <a class="header-anchor" href="#concat拼接字符串" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CONCAT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, age) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> age </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">18</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/** 结果如下：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">如燕-18</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">李丽-18</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">李朗-18</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">沈涛-18</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">肖豹-18</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"></span></code></pre></div><h4 id="concat-ws拼接字符串" tabindex="-1"><code>CONCAT_WS</code>拼接字符串 <a class="header-anchor" href="#concat-ws拼接字符串" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> CONCAT_WS(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, age, gender) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> age </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">18</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/** 结果如下：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">李丽-18-1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">如燕-18-1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">李朗-18-0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">沈涛-18-0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">肖豹-18-0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"></span></code></pre></div><h4 id="upper转大写字母-lower转写字母" tabindex="-1"><code>UPPER</code>转大写字母，<code>LOWER</code>转写字母 <a class="header-anchor" href="#upper转大写字母-lower转写字母" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UPPER</span><span style="color:#A6ACCD;">(hobby) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">LOWER</span><span style="color:#A6ACCD;">(hobby) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span></code></pre></div><h4 id="substr-截取字符" tabindex="-1"><code>SUBSTR</code>：截取字符 <a class="header-anchor" href="#substr-截取字符" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">SUBSTR(string, start_position, </span><span style="color:#F78C6C;">length</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><ul><li><p><code>string</code>：要从中提取子字符串的<code>源字符串</code>。</p></li><li><p><code>start_position</code>：<code>起始位置</code>，表示要提取的子字符串的<code>起始位置</code>。它可以是一个<code>正整数</code>或<code>负整数</code>。</p><ul><li>如果是<code>正整数</code>，则表示从<code>左侧</code>开始的字符位置，其中第一个字符的位置为<code>1</code>。</li><li>如果是<code>负整数</code>，则表示从<code>右侧</code>开始的字符位置，其中最后一个字符的位置为<code>-1</code>。</li></ul></li><li><p><code>length</code>：可选参数，表示要提取的子字符串的<code>长度</code>。如果省略该参数，则将提取<code>从起始位置到源字符串的末尾</code>的所有字符。</p></li></ul><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;"># hobby </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> pingpang</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # pingpang</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; #  ingpang</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; #     pang</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # pin</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # </span><span style="color:#F78C6C;">in</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # ng</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # ang 从倒数第三个字符截取到最后</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> SUBSTR(hobby, </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # an 从倒数第三个字符开始截取两个字符</span></span>
<span class="line"></span></code></pre></div><h4 id="instr-返回字符串索引" tabindex="-1"><code>INSTR</code>：返回字符串索引 <a class="header-anchor" href="#instr-返回字符串索引" aria-hidden="true">#</a></h4><ul><li>若字符不在该字符串中，返回<code>0</code></li></ul><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;"># hobby </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> pingpang</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> INSTR(hobby, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # </span><span style="color:#F78C6C;">6</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> INSTR(hobby, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">o</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student; # </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre></div><h4 id="去掉左右空格" tabindex="-1">去掉左右空格 <a class="header-anchor" href="#去掉左右空格" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TRIM</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">  pingpang </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); </span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">LTRIM</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">  pingpang  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); </span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RTRIM</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">  pingpang  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre></div><h4 id="字符串补齐" tabindex="-1">字符串补齐 <a class="header-anchor" href="#字符串补齐" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> LPAD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#89DDFF;">******</span><span style="color:#A6ACCD;">ping</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> RPAD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);  # ping1111</span></span>
<span class="line"></span></code></pre></div><h4 id="替换" tabindex="-1">替换 <a class="header-anchor" href="#替换" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">REPLACE</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pingpang</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">ing</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">ang</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">REPLACE</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pingpang</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">pang</span></span>
<span class="line"></span></code></pre></div><h4 id="format-格式化数字" tabindex="-1"><code>FORMAT</code>：格式化数字 <a class="header-anchor" href="#format-格式化数字" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">FORMAT</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">, decimal_places)</span></span>
<span class="line"></span></code></pre></div><ul><li><p><code>number</code>：要格式化的<code>数字</code>值。</p></li><li><p><code>decimal_places</code>：表示要<code>保留的小数位数</code>。</p></li></ul><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FORMAT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1234567</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">89</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">234</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">567</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">9</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FORMAT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1234</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">5678</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">234</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">57</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FORMAT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1234</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">56</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">234</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">56</span></span>
<span class="line"></span></code></pre></div><h3 id="数学函数" tabindex="-1">数学函数 <a class="header-anchor" href="#数学函数" aria-hidden="true">#</a></h3><hr><h4 id="round-四舍五入" tabindex="-1"><code>ROUND</code> 四舍五入 <a class="header-anchor" href="#round-四舍五入" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ROUND</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ROUND</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.18</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ROUND</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.14</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ROUND</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.18</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">18</span></span>
<span class="line"></span></code></pre></div><h4 id="ceil-向上取整" tabindex="-1"><code>CEIL</code> 向上取整 <a class="header-anchor" href="#ceil-向上取整" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> CEIL(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);  # </span><span style="color:#F78C6C;">4</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> CEIL(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.14</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">4</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> CEIL(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);  # </span><span style="color:#F78C6C;">4</span></span>
<span class="line"></span></code></pre></div><h4 id="floor-向下取整" tabindex="-1"><code>FLOOR</code> 向下取整 <a class="header-anchor" href="#floor-向下取整" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FLOOR</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);  # </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FLOOR</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.94</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); #  </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FLOOR</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);  # </span><span style="color:#F78C6C;">3</span></span>
<span class="line"></span></code></pre></div><h4 id="truncate-截断小数位" tabindex="-1"><code>TRUNCATE</code> 截断小数位 <a class="header-anchor" href="#truncate-截断小数位" aria-hidden="true">#</a></h4><ul><li><code>TRUNCATE</code>函数不进行四舍五入，而是直接<code>截断小数部分</code></li></ul><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TRUNCATE</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.68</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">6</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TRUNCATE</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.6896</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">6</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TRUNCATE</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123.456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">456</span></span>
<span class="line"></span></code></pre></div><h4 id="mod取余" tabindex="-1"><code>MOD</code>取余 <a class="header-anchor" href="#mod取余" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> MOD(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> MOD(</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre></div><h3 id="日期函数" tabindex="-1">日期函数 <a class="header-anchor" href="#日期函数" aria-hidden="true">#</a></h3><hr><h4 id="now-返回日期和时间" tabindex="-1"><code>NOW</code> 返回日期和时间 <a class="header-anchor" href="#now-返回日期和时间" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NOW</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">; # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">07</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">01</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">14</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">17</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">39</span></span>
<span class="line"></span></code></pre></div><h4 id="curdate-返回日期" tabindex="-1"><code>CURDATE</code> 返回日期 <a class="header-anchor" href="#curdate-返回日期" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> CURDATE</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">; # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">07</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">01</span></span>
<span class="line"></span></code></pre></div><h4 id="curtime-返回时间" tabindex="-1"><code>CURTIME</code> 返回时间 <a class="header-anchor" href="#curtime-返回时间" aria-hidden="true">#</a></h4><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> CURTIME</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">; # </span><span style="color:#F78C6C;">14</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">52</span></span>
<span class="line"></span></code></pre></div><h4 id="current-timestamp-返回日期和时间" tabindex="-1"><code>CURRENT_TIMESTAMP</code> 返回日期和时间 <a class="header-anchor" href="#current-timestamp-返回日期和时间" aria-hidden="true">#</a></h4><hr><h4 id="date-提取日期部分" tabindex="-1"><code>DATE</code>：提取日期部分 <a class="header-anchor" href="#date-提取日期部分" aria-hidden="true">#</a></h4><hr><h4 id="time-提取时间部分" tabindex="-1"><code>TIME</code>：提取时间部分 <a class="header-anchor" href="#time-提取时间部分" aria-hidden="true">#</a></h4><hr><h4 id="year-提取年份" tabindex="-1"><code>YEAR</code>：提取年份 <a class="header-anchor" href="#year-提取年份" aria-hidden="true">#</a></h4><hr><h4 id="month-提取月份" tabindex="-1"><code>MONTH</code>：提取月份 <a class="header-anchor" href="#month-提取月份" aria-hidden="true">#</a></h4><hr><h4 id="day-提取日期中的天数" tabindex="-1"><code>DAY</code>：提取日期中的天数 <a class="header-anchor" href="#day-提取日期中的天数" aria-hidden="true">#</a></h4><hr><h4 id="hour-提取小时" tabindex="-1"><code>HOUR</code>：提取小时 <a class="header-anchor" href="#hour-提取小时" aria-hidden="true">#</a></h4><hr><h4 id="minute-提取分钟" tabindex="-1"><code>MINUTE</code>：提取分钟 <a class="header-anchor" href="#minute-提取分钟" aria-hidden="true">#</a></h4><hr><h4 id="second-提取秒数" tabindex="-1"><code>SECOND</code>：提取秒数 <a class="header-anchor" href="#second-提取秒数" aria-hidden="true">#</a></h4><hr><h4 id="str-to-date" tabindex="-1"><code>STR_TO_DATE</code> <a class="header-anchor" href="#str-to-date" aria-hidden="true">#</a></h4><p>将日期格式的字符串转成指定格式的日期</p><blockquote><p>示例</p></blockquote><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> STR_TO_DATE(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1988-9-9</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%Y-%m-%d</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1988</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span></span>
<span class="line"></span></code></pre></div><h4 id="date-format" tabindex="-1"><code>DATE_FORMAT</code> <a class="header-anchor" href="#date-format" aria-hidden="true">#</a></h4><p>将日期转换成指定字符串</p><blockquote><p>示例</p></blockquote><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATE_FORMAT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">NOW</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%Y年%m月%d日</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # 1998年07月07日</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATE_FORMAT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">NOW</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%Y年%c月%d日</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # 1998年7月07日</span></span>
<span class="line"></span></code></pre></div><table><thead><tr><th style="text-align:center;">格式符</th><th style="text-align:center;">功能</th></tr></thead><tbody><tr><td style="text-align:center;">%Y</td><td style="text-align:center;">4位的年份</td></tr><tr><td style="text-align:center;">%y</td><td style="text-align:center;">2位的年份</td></tr><tr><td style="text-align:center;">%m</td><td style="text-align:center;">月份(01,02)</td></tr><tr><td style="text-align:center;">%c</td><td style="text-align:center;">月份(1,2)</td></tr><tr><td style="text-align:center;">%d</td><td style="text-align:center;">日(01,02)</td></tr><tr><td style="text-align:center;">%H</td><td style="text-align:center;">小时(24小时制)</td></tr><tr><td style="text-align:center;">%h</td><td style="text-align:center;">小时(12小时制)</td></tr><tr><td style="text-align:center;">%i</td><td style="text-align:center;">分钟(00,01)</td></tr><tr><td style="text-align:center;">%s</td><td style="text-align:center;">秒(00,01)</td></tr></tbody></table><h4 id="datediff" tabindex="-1"><code>DATEDIFF</code> <a class="header-anchor" href="#datediff" aria-hidden="true">#</a></h4><ul><li><p>计算两个日期之间相差的天数，表示expr1比expr2<code>晚</code>多少天</p></li><li><p>expr1和expr2是<code>日期</code>或<code>日期和时间表达式</code>，计算中只使用值的<code>日期部分</code></p></li></ul><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DATEDIFF</span><span style="color:#A6ACCD;">(expr1, expr2));</span></span>
<span class="line"></span></code></pre></div><blockquote><p>示例：</p></blockquote><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DATEDIFF</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1997-11-30 23:59:59</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1997-12-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DATEDIFF</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1997-12-31 23:59:59</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1997-11-30</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">31</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DATEDIFF</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1997-12-31 23:59:59</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1997-11-30 00:00:00</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">31</span></span>
<span class="line"></span></code></pre></div><h4 id="date-add" tabindex="-1"><code>DATE_ADD</code> <a class="header-anchor" href="#date-add" aria-hidden="true">#</a></h4><p>计算一个时间和一个时间段相加的结果</p><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> DATE_ADD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1998-09-09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">YEAR</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1999</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> DATE_ADD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1998-09-09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">MONTH</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> DATE_ADD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1998-09-09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DAY</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">10</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> DATE_ADD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1998-09-09 20:30</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DAY</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> DATE_ADD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1998-09-09 20:30</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">HOUR</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">21</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> DATE_ADD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1998-09-09 20:30</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">MINUTE</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">31</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">00</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> DATE_ADD(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1998-09-09 20:30</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SECOND</span><span style="color:#A6ACCD;">); # </span><span style="color:#F78C6C;">1998</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">09</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">01</span></span>
<span class="line"></span></code></pre></div><h2 id="聚合函数" tabindex="-1">聚合函数 <a class="header-anchor" href="#聚合函数" aria-hidden="true">#</a></h2><hr><h3 id="sum" tabindex="-1">SUM <a class="header-anchor" href="#sum" aria-hidden="true">#</a></h3><p>求和函数</p><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SUM</span><span style="color:#A6ACCD;">(age) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> teachers;</span></span>
<span class="line"></span></code></pre></div><h3 id="avg" tabindex="-1">AVG <a class="header-anchor" href="#avg" aria-hidden="true">#</a></h3><p>求平均值函数</p><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AVG</span><span style="color:#A6ACCD;">(age) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> teachers;</span></span>
<span class="line"></span></code></pre></div><h3 id="count" tabindex="-1">COUNT <a class="header-anchor" href="#count" aria-hidden="true">#</a></h3><p>输出查询到的数据条数</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果是<code>COUNT(column_id)</code>，则会返回column_id不为<code>NULL</code>的数据的条数</p></div><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">COUNT</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> teachers </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> age </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="max" tabindex="-1">MAX <a class="header-anchor" href="#max" aria-hidden="true">#</a></h3><p>输出查询到的列的最大值</p><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MAX</span><span style="color:#A6ACCD;">(age) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> teachers </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> age </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;">; # 输出最大年龄</span></span>
<span class="line"></span></code></pre></div><h3 id="min" tabindex="-1">MIN <a class="header-anchor" href="#min" aria-hidden="true">#</a></h3><p>输出查询到的列的最小值</p><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MIN</span><span style="color:#A6ACCD;">(age) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> teachers </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> age </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;">; # 输出最小年龄</span></span>
<span class="line"></span></code></pre></div><h2 id="自定义函数" tabindex="-1">自定义函数 <a class="header-anchor" href="#自定义函数" aria-hidden="true">#</a></h2><hr><h3 id="创建自定义函数" tabindex="-1">创建自定义函数 <a class="header-anchor" href="#创建自定义函数" aria-hidden="true">#</a></h3><ul><li>如果函数体只有一行，可以省略<code>BEGIN</code>和<code>END</code></li></ul><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FUNCTION_NAME</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">参数1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">参数1类型</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">参数2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">参数2类型</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, ... ) </span><span style="color:#F78C6C;">RETURNS</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">返回值类型</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">变量名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">变量类型</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">变量默认值</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">参数设置</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">; </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SQL语句</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">RETURN</span><span style="color:#A6ACCD;"> 返回值;</span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="使用自定义函数" tabindex="-1">使用自定义函数 <a class="header-anchor" href="#使用自定义函数" aria-hidden="true">#</a></h3><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> FUNCTION_NAME</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><h3 id="查看自定义函数" tabindex="-1">查看自定义函数 <a class="header-anchor" href="#查看自定义函数" aria-hidden="true">#</a></h3><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> FUNCTION_NAME;</span></span>
<span class="line"></span></code></pre></div><h3 id="删除自定义函数" tabindex="-1">删除自定义函数 <a class="header-anchor" href="#删除自定义函数" aria-hidden="true">#</a></h3><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> FUNCTION_NAME;</span></span>
<span class="line"></span></code></pre></div><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-hidden="true">#</a></h3><blockquote><p>例如：(函数体只有一行，省略<code>BEGIN</code>和<code>END</code>)</p></blockquote><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FORMAT_CURRENT_DATE</span><span style="color:#A6ACCD;">(format </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">)) </span><span style="color:#F78C6C;">RETURNS</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#F78C6C;">RETURN</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATE_FORMAT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">NOW</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, format);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> FORMAT_CURRENT_DATE(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%y</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre></div><blockquote><p>例如：(函数体多行，不能省略<code>BEGIN</code>和<code>END</code>)</p></blockquote><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ADD_USER</span><span style="color:#A6ACCD;">(userName </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">), age </span><span style="color:#F78C6C;">TINYINT</span><span style="color:#A6ACCD;">, gender </span><span style="color:#F78C6C;">TINYINT</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">RETURNS</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">INT</span></span>
<span class="line"><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> lyb.teachers(</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, age, gender) </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (userName, age, gender);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">RETURN</span><span style="color:#A6ACCD;"> LAST_INSERT_ID</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 调用函数</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> ADD_USER(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">宗主</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>错误处理</strong></p><p>创建自定义函数时可能会报以下错误：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">HY000</span><span style="color:#89DDFF;">][</span><span style="color:#F78C6C;">1418</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> This </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">has</span><span style="color:#A6ACCD;"> none of DETERMINISTIC, NO SQL, or READS SQL DATA </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> its declaration and binary logging is enabled </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">might</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">want</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">less</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">safe</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">log_bin_trust_function_creators</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">variable</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><p>错误原因： 这是因为开启了bin-log, 所以必须指定我们的函数是否是</p><ol><li>DETERMINISTIC 不确定的</li><li>NO SQL 没有SQl语句，当然也不会修改数据</li><li>READS SQL DATA 只是读取数据，当然也不会修改数据</li><li>MODIFIES SQL DATA 要修改数据</li><li>CONTAINS SQL 包含了SQL语句 其中在function里面，只有 DETERMINISTIC, NO SQL 和 READS SQL DATA 被支持。如果我们开启了 bin-log, 我们就必须为我们的function指定一个参数。</li></ol><p><strong>解决方法：</strong></p><div class="language-SQL"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;"># 查询 log_bin_trust_function_creators</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW VARIABLES </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">log_bin_trust_function_creators</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"># 重点是这个命令，设置log_bin_trust_function_creators</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">GLOBAL</span><span style="color:#A6ACCD;"> log_bin_trust_function_creators</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"># 再次查询 log_bin_trust_function_creators</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW VARIABLES </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">log_bin_trust_function_creators</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre></div></div>`,117),e=[o];function t(c,C,r,y,A,D){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{F as __pageData,d as default};
